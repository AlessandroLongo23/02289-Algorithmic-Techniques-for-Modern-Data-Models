## Exercise 1: Largest numbers
### Problem
Given $m$ numbers from the universe $[n]=\{1,\ldots,n\}$, suppose we want to find the $k$ largest
#### Part 1
In the RAM-model, how would you solve this task? What is your total running time?
#### Part 2
In the streaming model, how would you solve this task? What is your space usage? What is your running time?
### Solution
#### Part 1

#### Part 2

- - -
## Exercise 2: Missing numbers
### Problem
#### Part 1
Assume you get $n-1$ different integers from the set $\{1,\ldots,n\}$ in a stream. Can you deduce the missing number using only $O(\log(n))$ space?
#### Part 2
Assume now you only get $n-2$ different integers from the set $\{1,\ldots,n\}$ in a stream. Can you deduce the missing numbers using only $O(\log(n))$ space?
### Solution
#### Part 1

#### Part 2

- - -
## Exercise 3: Reservoir sampling
### Problem
Here $\text{Random}(a)$ is a random number generator that uniformly at random returns an integer between $1$ and $a$ (both included). At the end of the algorithm, the variable $l$ stores the length of the input stream $S$; this number is not known to the algorithm in advance. If $S$ is empty, the output of the algorithm is correctly undefined. In the following, consider an arbitrary non-empty input stream $S$, and let $m$ denote the unknown length of $S$.
```
proc get_one_sample(S):
	l = 0
	while S is not empty:
		x = next item in S
		l++
		if random(l) = 1:
			sample = x (*)
	
	return sample
```
#### Part 1
Prove that the item returned by $\texttt{GetOneSample}(S)$ is chosen uniformly at random from $S$
#### Part 2
What is the expected value of $l$ when $\texttt{GetOneSample}(S)$ executes line $(*)$ for the last time?
#### Part 3
What is the expected number of times that $\texttt{GetOneSample}(S)$ executes line $(*)$ for the last time or the algorithm ends (whichever happens first)?
#### Part 4
What is the expected number of times that $\texttt{GetOneSample}(S)$ executes line $(*)$ for the second last time or the algorithm ends (whichever happens first)?
#### Part 5
Describe and analyze an algorithm that returns a subset of $k$ items chosen uniformly at random from a data stream of length at least $k$. The integer $k$ is given as part of the input to your algorithm. Prove that your algorithm is correct.
For example, if $k=2$ and the stream contains the sequence $(1,2,3,4)$, the algorithm should return the subset $\{3,1\}$ with probability $\dfrac16$.
### Solution
#### Part 1

#### Part 2

#### Part 3

#### Part 4

#### Part 5

- - -
## Exercise 4: Frequency
### Problem
Consider the trivial solution to the frequency problem: keeping as many counters are there are colors. What is the space consumption?
### Solution

- - -
## Exercise 5: Misra-Gries
### Problem
Run Misra-Gries' algorithm on the following stream with $k=3$.
$$\text{b,a,b,b,a,m,b,a,m,b,a,n,a,n,a,n,a,n,a}$$
What do you output? How large was your largest counter?
### Solution

- - -
## Exercise 6: Tightness of Misra-Gries
### Problem
Given $k$ and $m$, design a stream of length $m$ that contains some character $\dfrac mk$ times, yet this character is not output by Misra-Gries' algorithm.
### Solution

- - -
## Exercise 7
### Problem
Let $\hat m$ be the sum of all counters maintained by the Misra-Gries algorithm after it has processed an input stream, i.e.:
$$\hat m=\sum_{l\in\text{keys}(A)}A[l]$$
Prove that:
$$f_j-\dfrac{m-\hat m}k\le\hat f_j\le f_j$$
### Solution

- - -
## Exercise 8: Merging two streams
### Problem
Suppose we have run the (one-pass) Misra-Gries algorithm on two streams $\sigma_1$ and $\sigma_2$, thereby obtaining a summary for each stream consisting of $k-1$ counters. Let $m_i$ denote the length of the stream $\sigma_i$. Consider the following algorithm for merging these two summaries to produce a **single** $k-1$-counter summary.
```
proc merge_streams(a, b):
	combine the two sets of coutners, adding up counts for any common items
	if more than k-1 counters remain:
		c = value of k-th counter, based on decreasing order of value
		reduce each counter by c
		delete all keys with non-positive counters
```
Prove that the resulting summary is good for the combined stream $\sigma_1\circ\sigma_2$ in the sense that frequency estimates from it satisfy the bounds given for Misra-Gries, namely:
$$f_j-\dfrac mk\le\hat f_j\le f_j$$
where $m=m_1+m_2$ is the length of the combined stream.
### Solution

- - -