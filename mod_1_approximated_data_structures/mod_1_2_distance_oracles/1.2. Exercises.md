## Exercise 1.2.1: Exact Distance Oracle #solved
### Problem
Given an undirected graph $G$ with non-negative edge weights, we want a data structure that answers queries for $\delta(u,v)$ for vertices $u,v$, where $\delta(u,v)$ is the shortest path distance in $G$ between $u$ and $v$.
#### Part 1
With no preprocessing of the graph, what query-time can you obtain? How much space is needed?
#### Part 2
Can this be done in $O(n^2)$ space and $O(1)$ query time? What's your preprocessing time?
### Solution
#### Part 1
With no preprocessing, we need to run a BFS from node $u$ until we get to $v$, so the query time is the time complexity of BFS, i.e., $O(V+E)$.
#### Part 2
Yes, all we need is a $N\times N$ matrix with all the pair-wise distances, and the query time is just a lookup in the table, which match the requirements. For the preprocessing, we need an all-pair shortest distance algorithm, which runs in $O(N^3)$.
- - -
## Exercise 1.2.2: Shortest Path Metric #solved
### Problem
Prove that this inequality indeed holds for shortest path distances, i.e., show that for all $u,v,w\in V$:
$$\delta(u,w)\le\delta(u,v)+\delta(v,w)$$
### Solution
We can prove it by contradiction. If $\delta(u,w)$ is the shortest path from $u$ to $w$, and there was a node $v$ such that $\delta(u,v)+\delta(v,w)$ was strictly less than that, then $\delta(u,w)$ wouldn't be the shortest anymore because there would exist another path through $v$ that lowers that distance. Is it also trivial to see that such path would be valid because it already exists a sub-path from $u$ to $v$ and from $v$ to $w$.
This leads to a contradiction, so the inequality is proven. 
- - -
## Exercise 1.2.3: Specialized Thorup-Zwick Oracle #toSolve
### Problem
We showed that the specialized approximate distance oracle presented in the lecture requires expected space $O(n^{3/2})$.
#### Part 1
What is the query time?
#### Part 2
Show that its stretch is $3$.
### Solution

- - -
## Exercise 1.2.4 #solved
### Problem
One version of Markov's inequality states that for any non-negative random variable $X$ and for any $t\gt0$:
$$P[X\ge t]\le\dfrac{\mathbb E[X]}t$$
With this inequality, show how to modify the construction of the specialized approximate distance oracle to get $O(n^{3/2})$ worst-case space.
### Solution
To guarantee a $O(n^{3/2})$ worst-case space, we need to guarantee the sampled set size to be at most $2\sqrt n$, so we can either try with a predetermined probability $p$ such that the expected value of the set is:
$$\mathbb E[|S|]=2\sqrt{n}$$
check if the set is smaller, and then accept if so and reject and retry otherwise.
Alternatively, we could implement a random sampler that extracts a random subset of exactly $$|S|=\lfloor2\sqrt{n}\rfloor$$
nodes, which would require only one try.
- - -
## Exercise 1.2.5 #toSolve
### Problem
The approximate distance oracle presented in this lecture doesn't work if $G$ is a weighted directed graph. Point to where the argument breaks down.
### Solution

- - -
## Exercise 1.2.6 #solved #toTranscribe
### Problem
Show that the query algorithm terminates no later than at index $k-1$.
### Solution

- - -
## Exercise 1.2.7 #solved #toTranscribe
### Problem
Show that the two distances, whose sum is returned in the last line of the query algorithm, are stored by the algorithm.
### Solution

- - -
## Exercise 1.2.8 #toSolve
### Problem
Show how to achieve $O(k)$ time for the query algorithm of Thorup-Zwick. You may rely on the existence of a hash table with $O(1)$ access time and $O(s)$ space, where $s$ is the number of elements stored.
As mentioned in the lecture, the Thorup-Zwick oracle can be constructed in $O(kmn^{1/k})$ time. In the next exercise, we will not prove this but only cover a small part of the construction needed to achieve this time bound.
We assume non-negative integer edge weights in the following exercise since this is needed to achieve the bound. This can be extended to arbitrarily non-negative edge weights at the cost of an extra $\log(n)$ factor in the construction time.
### Solution

- - -
## Exercise 1.2.9 #toSolve
### Problem
Assume there is an $O(m)$ time algorithm for calculating the single-source-shortest path tree of a graph. For any $i\lt k$, show how to compute $p_i(v)$ for all $v\in V$ in $O(m)$ total time, not $O(m)$ time per $v$.
### Solution

- - -
## Exercise 1.2.10 #toSolve
### Problem
In the book, the authors state that “the US road network is a planar graph”. Indeed, a planar undirected weighted graph models a large road network. Can you think of different ways of modelling a large road network as a graph? What are their advantages and disadvantages?
### Solution

- - -
## Exercise 1.2.11 #toSolve
### Problem
Let $S\subset V$ be a subset of vertices. 
Assume we only want to answer approximate distance-queries in $G$ between vertices in $S$.
#### Part 1
For which vertices $v\in V$ is the bunch $B(v)$ needed in order to answer such queries?
#### Part 2
What is the space for this “restricted” oracle?
#### Part 3
Using a different data structure, can you remove the dependency on $n=|V|$ from the space bound?
### Solution
#### Part 1

#### Part 2

#### Part 3

- - -
## Exercise 1.2.12 #toSolve
### Problem
In the following, $\delta_H$ denotes the shortest path distance function for a graph $H$. Let $G=(V,E)$ be an undirected graph with non-negative edge weights and let $t\ge1$.
A $t$-spanner of $G$ is a subgraph $S=(V,E')$ such that for all $u,v\in V$:
$$\delta_S(u,v)\le t\delta_G(u,v)$$
For any integer $k\ge 1$ and any graph $G$ with $m$ edges and $n$ vertices, $G$ contains a $(2k-1)$-spanner $S$ with $O(kn^{1+1/k})$ edges, and $S$ can be found in $O(km+n)$ time.
Let $\varepsilon\gt0$ be a given constant. Combine the above fact with the approximate distance oracle of Thorup-Zwick to obtain an approximate distance oracle with $O(1)$ stretch, $O(1)$ query time, $O(n^{1+\varepsilon})$ space, and $O(m+n^{1+\varepsilon})$ construction time.
### Solution

- - -